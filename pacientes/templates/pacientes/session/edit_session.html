{% extends "pacientes/base/base.html" %}

{% block content %}
<h1>Editar Sesión</h1>
<ul class="breadcrumbs">
    <li><a href="{% url 'patient_list' %}">Inicio</a></li>
    <li>/</li>
    <li><a href="{% url 'calendar' %}">Agenda</a></li>
    <li>/</li>
    <li><a href="{% url 'session_detail' session.id %}">Sesión</a></li>
    <li>/</li>
    <li><a href="#" class="active">Editar</a></li>
</ul>

<div class="form-container">
    <div class="row section">
        <div class="col-title">
            <i class="fa-solid fa-calendar-alt"></i>
            <h3>Información de la Sesión</h3>
            <p>Detalles generales de la sesión</p>
        </div>
        <div class="col-fields">
            <form method="POST" enctype="multipart/form-data" class="add-form">
                {% csrf_token %}
                {{ form.non_field_errors }}

                <div class="form-group">
                    <label for="{{ form.date.id_for_label }}">Fecha</label>
                    {{ form.date }}
                    {% if form.date.errors %}
                        <div class="error-message">{{ form.date.errors }}</div>
                    {% endif %}
                </div>

                <div class="form-group">
                    <label for="{{ form.time.id_for_label }}">Hora</label>
                    {{ form.time }}
                    {% if form.time.errors %}
                        <div class="error-message">{{ form.time.errors }}</div>
                    {% endif %}
                </div>

                <div class="form-group">
                    <label for="{{ form.patient.id_for_label }}">Paciente</label>
                    {{ form.patient }}
                    {% if form.patient.errors %}
                        <div class="error-message">{{ form.patient.errors }}</div>
                    {% endif %}
                </div>

                <div class="form-group">
                    <label for="{{ form.specialist.id_for_label }}">Especialista</label>
                    {{ form.specialist }}
                    {% if form.specialist.errors %}
                        <div class="error-message">{{ form.specialist.errors }}</div>
                    {% endif %}
                </div>

                <div class="form-group">
                    <label for="{{ form.room.id_for_label }}">Sala</label>
                    {{ form.room }}
                    {% if form.room.errors %}
                        <div class="error-message">{{ form.room.errors }}</div>
                    {% endif %}
                </div>

                <div class="form-group">
                    <label for="{{ form.objective.id_for_label }}">Objetivo</label>
                    {{ form.objective }}
                    {% if form.objective.errors %}
                        <div class="error-message">{{ form.objective.errors }}</div>
                    {% endif %}
                </div>

                <div class="form-group">
                    <label for="{{ form.activity.id_for_label }}">Actividad</label>
                    {{ form.activity }}
                    {% if form.activity.errors %}
                        <div class="error-message">{{ form.activity.errors }}</div>
                    {% endif %}
                </div>

                <div class="form-group">
                    <label for="{{ form.materials.id_for_label }}">Materiales</label>
                    {{ form.materials }}
                    {% if form.materials.errors %}
                        <div class="error-message">{{ form.materials.errors }}</div>
                    {% endif %}
                </div>

                <div class="form-group">
                    <label for="{{ form.observation.id_for_label }}">Observación</label>
                    {{ form.observation }}
                    {% if form.observation.errors %}
                        <div class="error-message">{{ form.observation.errors }}</div>
                    {% endif %}
                </div>

                <div class="form-group">
                    <label for="{{ form.attachment.id_for_label }}">Archivo Adjunto</label>
                    {{ form.attachment }}
                    {% if form.attachment.errors %}
                        <div class="error-message">{{ form.attachment.errors }}</div>
                    {% endif %}
                    {% if session.attachment %}
                        <p>Archivo actual: <a href="{{ session.attachment.url }}" target="_blank">{{ session.attachment.name }}</a></p>
                    {% endif %}
                </div>

                <div class="form-group">
                    <label for="{{ form.status.id_for_label }}">Estado</label>
                    {{ form.status }}
                    {% if form.status.errors %}
                        <div class="error-message">{{ form.status.errors }}</div>
                    {% endif %}
                </div>

                <!-- Botones de Acción -->
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">Guardar Cambios</button>
                    <a href="{% url 'reservation_list' %}" class="btn btn-secondary">Cancelar</a>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}
