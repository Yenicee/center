{% extends "pacientes/base/base.html" %}
{% block content %}
<h1>Finanzas</h1>
<form method="get" class="filters" style="margin-bottom:1rem;">
  <label>Año <input type="number" name="year" value="{{ year }}"></label>
  <label>Mes <input type="number" name="month" value="{{ month }}" min="1" max="12"></label>
  <button class="btn btn-primary">Ver</button>
</form>

<div class="cards-grid">
  <div class="card"><h3>Ingreso Proyectado</h3><p>S/. {{ ingresos_proyectados|floatformat:2 }}</p></div>
  <div class="card"><h3>Ingreso Liquidado</h3><p>S/. {{ ingresos_liquidados|floatformat:2 }}</p></div>
  <div class="card"><h3>Egresos</h3><p>S/. {{ egresos_total|floatformat:2 }}</p></div>
  <div class="card"><h3>Nómina (cobrado)</h3><p>S/. {{ nomina_total|floatformat:2 }}</p></div>
  <div class="card success"><h3>Balance</h3><p>S/. {{ balance|floatformat:2 }}</p></div>
</div>

<h3 style="margin-top:2rem;">Próximos pagos</h3>
<table class="table">
  <thead><tr><th>Ítem</th><th>Monto</th><th>Vencimiento</th><th>Pagado</th></tr></thead>
  <tbody>
    {% for e in proximos_pagos %}
      <tr>
        <td>{{ e.name }}</td>
        <td>S/. {{ e.amount }}</td>
        <td>{{ e.due_date|date:"d/m/Y" }}</td>
        <td>{% if e.paid %}Sí{% else %}No{% endif %}</td>
      </tr>
    {% empty %}
      <tr><td colspan="4">Sin pendientes.</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
